{"mappings":"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","sources":["components/modal.js","node_modules/@parcel/runtime-js/lib/runtime-f7d1b4a8fa098cc2.js"],"sourcesContent":["import React, { useEffect } from \"react\"\r\nimport * as microPNG from \"../files/micro.png\"\r\n\r\n//* команда отмена = удалить последнее\r\n\r\nexport default React.memo(function Modal({ modal, closeModal, addOneToggle }) {\r\n\tuseEffect(() => {\r\n\t\t//console.log(document.getElementById(\"modal\"))\r\n\t\tif (modal.state === \"on\") {\r\n\t\t\tdocument.getElementById(\"modal\").classList.remove(\"hidden\")\r\n\t\t\tdocument.getElementById(\"modal-main\").innerHTML = \"\"\r\n\t\t\tif (modal.content == \"voice\") {\r\n\t\t\t\trenderVoice()\r\n\t\t\t} else if (modal.content == \"copy\") {\r\n\t\t\t\trenderCopy(modal.val)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tdocument.getElementById(\"modal\").classList.add(\"hidden\")\r\n\t\t}\r\n\t})\r\n\r\n\t/* voice\r\n\t<div id=\"modal-main\">\r\n  \t\t<div class=\"voice-info\">Нажмите на кнопку и начните говорить\r\n\t\t\t<br>Команды:<br>\r\n\t\t\t<ul class=\"list-disc w-2/3 m-3\">\r\n\t\t\t<li>\"Название продукта\" - добавить один продукт</li>\r\n\t\t\t<li>\"Название продукта\" и \"цифра количества\" - добавить несколько.<br> Пример: \"Банан три\"</li>\r\n\t\t\t<li>\"Конец\", \"Всё\" (или закрытие окна) - закончить ввод</li>\r\n\t\t\t</ul></div>\r\n  \t\t<div class=\"voice-micro\">\r\n\t<img class=\"w-19\" src=\"${microPNG}\"/\r\n  \t\t</div>\r\n\r\n\t\t  {button}\r\n  \t</div>\r\n*/\r\n\tfunction renderVoice() {\r\n\t\tlet main = document.getElementById(\"modal-main\")\r\n\r\n\t\tlet info = document.createElement(\"div\")\r\n\t\tinfo.className =\r\n\t\t\t\"w-full md:w-2/3 h-auto mx-auto mt-10 text-center shadow-md flex flex-col justify-center items-center\"\r\n\t\tinfo.innerHTML = `Нажмите на кнопку и начните говорить\r\n\t\t\t<p>Команды:<br>\r\n\t\t\t<ul class=\"list-disc w-10/12 md:w-2/3 m-3\">\r\n\t\t\t<li>\"Название продукта\" - добавить один продукт</li>\r\n\t\t\t<li>\"Название продукта\" + \"цифра количества\" - добавить несколько<br> Пример: \"Банан три\"</li>\r\n\t\t\t<li>\"Отмена\" - убрать последний элемент</li>\r\n\t\t\t<li>\"Конец\" или \"Всё\" - закончить ввод</li>\r\n\t\t\t</ul>`\r\n\r\n\t\tlet micro = document.createElement(\"div\")\r\n\t\tmicro.className = \"w-max h-max mx-auto my-8 px-4 py-4 border rounded-full hover:shadow-lg\"\r\n\t\tmicro.innerHTML = `<img class=\"w-19\" alt=\"кнопка включения микрофона\" src=\"${microPNG}\"/>`\r\n\t\tmicro.onclick = (e) => {\r\n\t\t\tvoice()\r\n\t\t}\r\n\r\n\t\tlet button = createButton()\r\n\r\n\t\tmain.append(info)\r\n\t\tmain.append(micro)\r\n\t\tmain.append(button)\r\n\t}\r\n\r\n\tfunction renderCopy(val) {\r\n\t\tlet newUrl = window.location.origin + window.location.pathname + \"?\" + val\r\n\t\t//console.log(newUrl)\r\n\r\n\t\tnavigator.clipboard.writeText(newUrl)\r\n\r\n\t\tlet main = document.getElementById(\"modal-main\")\r\n\r\n\t\tlet wrapper = document.createElement(\"div\")\r\n\t\twrapper.className = \"flex flex-col items-center w-full h-full\"\r\n\r\n\t\tlet header = document.createElement(\"div\")\r\n\t\theader.className = \"flex flex-col justify-center items-center w-full m-10\"\r\n\t\theader.innerHTML = `\r\n\t\t<div class=\"mx-auto flex items-center justify-center h-14 w-14 rounded-full bg-green-100\">\r\n\t\t\t<svg\r\n\t\t\tclass=\"h-9 w-9 text-green-600\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke=\"currentColor\"\r\n\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t>\r\n\t\t\t\t<path\r\n\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\tstroke-width=\"2\"\r\n\t\t\t\t\td=\"M5 13l4 4L19 7\"\r\n\t\t\t\t></path>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t\t<h3 class=\"text-lg leading-6 font-medium text-gray-900 mt-4\">Ссылка скопирована!</h3>`\r\n\r\n\t\tlet copyLine = document.createElement(\"input\")\r\n\t\tcopyLine.type = \"text\"\r\n\t\tcopyLine.disabled = true\r\n\t\tcopyLine.className =\r\n\t\t\t\"w-11/12 md:w-1/2 h-max mt-2 mb-6 px-4 py-2 border rounded-lg text-gray-700 focus:outline-none focus:border-green-500 select-all\"\r\n\t\tcopyLine.value = newUrl\r\n\r\n\t\tlet button = createButton()\r\n\t\tbutton.classList.add(\"mt-5\")\r\n\r\n\t\twrapper.append(header)\r\n\t\twrapper.append(copyLine)\r\n\t\twrapper.append(button)\r\n\t\tmain.append(wrapper)\r\n\r\n\t\tdocument.getElementById(\"modal-background\").addEventListener(\"click\", function () {\r\n\t\t\twindow.location.href = newUrl\r\n\t\t})\r\n\t\tdocument.getElementById(\"close-modal-button\").addEventListener(\"click\", function () {\r\n\t\t\twindow.location.href = newUrl\r\n\t\t\t//window.onload = () => close()\r\n\t\t})\r\n\t}\r\n\r\n\tfunction close() {\r\n\t\tcloseModal({ state: \"off\", content: \"closed\" })\r\n\t}\r\n\r\n\tfunction createButton() {\r\n\t\tlet button = document.createElement(\"button\")\r\n\t\tbutton.className =\r\n\t\t\t\"px-6 py-4 bg-green-500 text-white text-base font-medium rounded-md mx-auto mb-10 w-max h-max shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-300\"\r\n\t\tbutton.id = \"close-modal-button\"\r\n\t\tbutton.innerText = \"Закрыть окно\"\r\n\t\tbutton.addEventListener(\"click\", close)\r\n\t\treturn button\r\n\t}\r\n\r\n\tfunction voice() {\r\n\t\tlet recognition\r\n\t\tconst numsAlp = [\r\n\t\t\t\"Один\",\r\n\t\t\t\"Два\",\r\n\t\t\t\"Три\",\r\n\t\t\t\"Четыре\",\r\n\t\t\t\"Пять\",\r\n\t\t\t\"Шесть\",\r\n\t\t\t\"Семь\",\r\n\t\t\t\"Восемь\",\r\n\t\t\t\"Девять\",\r\n\t\t\t\"Десять\",\r\n\t\t\t\"Одиннадцать\",\r\n\t\t\t\"Двенадцать\",\r\n\t\t\t\"Тринадцать\",\r\n\t\t\t\"Четырнадцать\",\r\n\t\t\t\"Пятнадцать\",\r\n\t\t\t\"Cемнадцать\",\r\n\t\t\t\"Восемнадцать\",\r\n\t\t\t\"Девятнадцать\",\r\n\t\t\t\"Двадцать\",\r\n\t\t]\r\n\t\ttry {\r\n\t\t\trecognition = new webkitSpeechRecognition()\r\n\t\t} catch (e) {\r\n\t\t\trecognition = new SpeechRecognition()\r\n\t\t}\r\n\t\t//const SpeechGrammarList = window.SpeechGrammarList || window.webkitSpeechGrammarList;\r\n\t\t//const SpeechRecognitionEvent = window.SpeechRecognitionEvent || window.webkitSpeechRecognitionEvent;\r\n\t\trecognition.lang = \"ru-RU\"\r\n\t\trecognition.interimResults = false //промежуточные\r\n\t\trecognition.continuous = true\r\n\t\trecognition.maxAlternatives = 1\r\n\r\n\t\trecognition.start()\r\n\r\n\t\tdocument.getElementById(\"modal-background\").addEventListener(\"click\", () => {\r\n\t\t\trecognition.stop()\r\n\t\t})\r\n\t\tdocument.getElementById(\"close-modal-button\").addEventListener(\"click\", () => {\r\n\t\t\t//button in modal\r\n\t\t\trecognition.stop()\r\n\t\t})\r\n\r\n\t\tconsole.log(\"Ready to receive a command.\")\r\n\r\n\t\trecognition.onaudiostart = function () {\r\n\t\t\t//hidden show something\r\n\t\t}\r\n\r\n\t\trecognition.onspeechend = function () {\r\n\t\t\tcloseModal({ state: \"off\", content: \"closed\" })\r\n\t\t\t//конец по причине тишины\r\n\t\t\t//recognition.start()\r\n\t\t\t//microphoneWrapper.style.visibility = 'visible'; hidden show again\r\n\t\t\t//audioRecordAnimation.style.visibility = 'hidden';\r\n\t\t}\r\n\r\n\t\trecognition.onresult = function (event) {\r\n\t\t\tconst last = event.results.length - 1\r\n\t\t\tlet res = event.results[last][0].transcript\r\n\t\t\t\t.trim()\r\n\t\t\t\t.split(\" \")\r\n\t\t\t\t.map((el) => el.charAt(0).toUpperCase() + el.slice(1))\r\n\r\n\t\t\tconsole.log(\"res: \", res)\r\n\r\n\t\t\tfor (let i = 0; i < res.length; i++) {\r\n\t\t\t\tconsole.log(res[i])\r\n\t\t\t\tif (res[i] == \"Конец\" || res[i] == \"Стоп\" || res[i] == \"Всё\") {\r\n\t\t\t\t\trecognition.stop()\r\n\t\t\t\t\tconsole.log(\"recognition stopped\")\r\n\t\t\t\t\tcloseModal({ state: \"off\", content: \"closed\" })\r\n\t\t\t\t} else if (numsAlp.includes(res[i + 1]) || Number.isInteger(+res[i + 1])) {\r\n\t\t\t\t\t//если следующее - колво\r\n\t\t\t\t\tif (Number.isInteger(+res[i + 1])) {\r\n\t\t\t\t\t\taddOneToggle({ item: res[i], colv: +res[i + 1] })\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taddOneToggle({ item: res[i], colv: numsAlp.indexOf(res[i + 1]) + 1 })\r\n\t\t\t\t\t}\r\n\t\t\t\t\ti++\r\n\t\t\t\t} else {\r\n\t\t\t\t\taddOneToggle({ item: res[i], colv: 1 })\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//closeModal({ state: \"off\", content: \"closed\" })\r\n\t\t\t//точность надо? console.log('Confidence: ' + event.results[0][0].confidence);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"absolute flex justify-center hidden inset-0 h-full w-full z-20 \" id=\"modal\">\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"fixed bg-gray-600 bg-opacity-50 h-full w-full\"\r\n\t\t\t\tid=\"modal-background\"\r\n\t\t\t\tonClick={close}></div>\r\n\t\t\t<div className=\"fixed flex flex-col bg-white w-10/12 md:w-6/12 h-max my-16 md:my-2\" id=\"modal-main\">\r\n\t\t\t\thello from modal!\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n})\r\n","module.exports = require('./helpers/bundle-url').getBundleURL('7VvG2') + require('./helpers/bundle-manifest').resolve(\"gKWDN\");"],"names":["$64635c35780913d7$export$2e2bcd8739ae039","$parcel$interopDefault","$lhfsu","memo","param","modal","closeModal","addOneToggle","close","state","content","createButton","button","document","createElement","className","id","innerText","addEventListener","useEffect","getElementById","classList","remove","innerHTML","info","micro","concat","$dt8YR","onclick","e","recognition","numsAlp","webkitSpeechRecognition","SpeechRecognition","lang","interimResults","continuous","maxAlternatives","start","stop","log","onaudiostart","onspeechend","onresult","event","results","length","last","transcript","trim","split","map","el","charAt","toUpperCase","slice","res","i","console","includes","Number","isInteger","item","colv","voice","main","append","renderVoice","val","newUrl","window","location","origin","pathname","navigator","clipboard","writeText","wrapper","header","copyLine","type","disabled","value","add","href","renderCopy","module","exports","parcelRequire","getBundleURL","resolve"],"version":3,"file":"modal.fd7e51ef.js.map"}